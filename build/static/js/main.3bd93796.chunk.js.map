{"version":3,"sources":["logo.svg","components/bookingDetail.js","components/hall.js","components/movie.js","App.js","reportWebVitals.js","index.js"],"names":["BookingDetail","state","name","showBookingDetail","custName","custEmail","handleShow","bind","handleClose","e","this","props","mv","mt","handlePurchase","movie","movieTime","sSeat","selectedSeat","Modal","show","onHide","backdrop","keyboard","Header","closeButton","Title","From","Body","map","s","ToggleButton","id","value","variant","disable","Form","Group","as","Row","className","controlId","Label","column","sm","Col","Control","plaintext","onChange","setState","target","Footer","Button","onClick","handleSave","Component","Hall","selectedMovie","confirmBooking","handleChange","val","console","log","some","item","filter","str","concat","handleConfirmBooking","selectedMovieTime","soldSeat","layout","JSON","parse","hall","ToggleButtonGroup","type","Table","striped","bordered","hover","items","index","subItems","sIndex","Movie","showHall","jwt_token","booking","soldseat","bookTicket","cancelTicket","purchaseTicket","selectSeat","mvid","fetch","then","res","json","data","ReserveSeat","catch","mvId","method","body","response","ok","headers","get","Error","status","error","alert","selectedSeats","forEach","push","jwt_decode","sub","bookingSeat","reqParams","stringify","jwt_token_new","email","movies","CardGroup","Card","style","width","Text","ms","time","App","showModal","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3bd93796.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, { Component } from \"react\";\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\nimport NavbarCollapse from \"react-bootstrap/esm/NavbarCollapse\";\n\nclass BookingDetail extends Component {\n  constructor() {\n    super();\n    this.state = {\n      name: \"React\",\n      showBookingDetail: true,\n      custName: \"\",\n      custEmail: \"\"\n      \n    };\n    this.handleShow = this.handleShow.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n \n  handleShow(e){\n\n  }\n  handleClose(e){\n    this.props.handleClose(e)\n  }\n  handleSave(mv, mt,custName,custEmail){\n    this.props.handlePurchase(mv, mt,custName,custEmail)\n  }\n  render() {\n    var mv = this.props.movie;\n    var mt = this.props.movieTime;\n    var sSeat = this.props.selectedSeat\n    var show = true;\n    return(\n      <>\n        <Modal show={show} onHide={() => this.handleClose()} backdrop=\"static\"\n        keyboard={false}>\n          <Modal.Header closeButton>\n            <Modal.Title>{mv.name} - {mt.From}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <h5>You have selected Seat </h5>\n           \n              {sSeat.map((s) => (\n                  <ToggleButton id=\"tbg-check-{s}\" value={s} \n                  variant=\"primary\" disable={true}>\n                  {s} \n              </ToggleButton>\n              ))}\n             \n            <Form>\n              <Form.Group as={Row} className=\"mb-3\" controlId=\"formPlaintextName\">\n              <Form.Label column sm=\"2\">\n                Name\n              </Form.Label>\n              <Col sm=\"10\">\n                <Form.Control plaintext onChange={e => this.setState({ custName: e.target.value })} />\n              </Col>\n            </Form.Group>\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formPlaintextEmail\">\n              <Form.Label column sm=\"2\">\n                Email\n              </Form.Label>\n              <Col sm=\"10\">\n                <Form.Control plaintext  onChange={e => this.setState({ custEmail: e.target.value })} />\n              </Col>\n            </Form.Group>\n          </Form>\n          </Modal.Body>\n\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={() => this.handleClose()}>\n              Close\n            </Button>\n            <Button variant=\"primary\" onClick={() => this.handleSave( mv, mt)}>\n              Checkout\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </>\n    );\n      \n  }\n}\n\n\nexport default BookingDetail;\n","\nimport React, { Component } from 'react'\n\nimport Button from 'react-bootstrap/Button';\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\nimport Table from 'react-bootstrap/Table';\nimport 'holderjs';\n\nclass Hall extends Component {\n    constructor() {\n        super();\n        \n        this.state = {\n          name: \"React\",\n          showBookingDetail: false,\n          selectedMovie: null,\n          selectedSeat : []\n          \n        };\n        \n        this.confirmBooking = this.confirmBooking.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        \n    }\n    \n    handleChange(e,val){\n        console.log(\"val : \");\n        console.log(val);\n        if (this.state.selectedSeat.some(item => val === item)){\n            console.log(\"value exist, remove\")\n            this.setState({selectedSeat: this.state.selectedSeat.filter(function(str) { \n                return str !== val \n            })});\n        } else {\n            this.setState({selectedSeat : this.state.selectedSeat.concat(val)});\n        }\n        console.log(this.state.selectedSeat);\n       // e.target.className = \"btn btn-error\"\n    }\n    confirmBooking(mv ,mt,sSeat){\n        this.props.handleConfirmBooking(mv ,mt,sSeat);\n    }\n\n    render() {\n          var mv = this.props.selectedMovie;\n          var mt = this.props.selectedMovieTime;\n          var sSeat = this.state.selectedSeat;\n          var soldSeat = this.state.soldSeat;\n          console.log(soldSeat)\n          const layout = JSON.parse(\"[\"+mt.hall.layout+\"]\");\n          \n        return(<div>\n            <ToggleButtonGroup id=\"row1\" type=\"checkbox\" variant=\"primary\" >\n            <Table striped bordered hover variant=\"dark\">\n    <tbody>\n      \n                \n            {layout.map((items, index) => (\n                <tr>\n                \n                {items.map((subItems, sIndex) => (\n                    <td><ToggleButton id=\"tbg-check-{subItems}\" value={subItems} \n                    variant={sSeat.some(item => subItems === item)?'warning':'primary'}\n                    onClick={(e) => this.handleChange(e,subItems)} >\n                    {subItems}\n                </ToggleButton></td>\n                ))}\n                \n                 </tr>\n            ))}\n           \n           </tbody>\n            </Table>\n            </ToggleButtonGroup><div>\n            <Button onClick={() => this.confirmBooking(mv,mt,sSeat)}>\n              Confirm Booking\n            </Button></div>\n            </div>)\n    };\n}\n\nexport default Hall","\nimport { render } from '@testing-library/react';\nimport React, { Component } from 'react'\nimport BookingDetail from './bookingDetail';\nimport Hall from './hall';\nimport Card from 'react-bootstrap/Card';\nimport CardGroup from 'react-bootstrap/CardGroup';\nimport Button from 'react-bootstrap/Button';\nimport jwt_decode from \"jwt-decode\";\n\nclass Movie extends Component {\n  constructor() {\n    super();\n    \n    this.state = {\n      name: \"React\",\n      showBookingDetail: false,\n      showHall: false,\n      selectedMovie: null,\n      selectedMovieTime: null,\n      selectedSeat: null,\n      jwt_token: null,\n      booking: null,\n      soldseat: null\n    };\n    this.bookTicket = this.bookTicket.bind(this);\n    this.cancelTicket = this.cancelTicket.bind(this);\n    this.purchaseTicket = this.purchaseTicket.bind(this);\n    this.selectSeat = this.selectSeat.bind(this)\n    this.confirmBooking = this.confirmBooking.bind(this);\n  }\n  \n\n  bookTicket(mvid) {\n    \n    console.log(mvid);\n    //validate input\n    fetch('http://localhost:8080/movies?mvid='+mvid)\n    .then(res => res.json())\n    .then((data) => {\n      console.log(data[0])\n      this.setState({selectedMovie: data[0]}, () => this.ReserveSeat())\n      console.log('set data done')\n    })\n    .catch(console.log)\n    \n   \n  }\n  selectSeat(movie,movieTime){\n    this.setState({selectedMovie: movie});\n    this.setState({selectedMovieTime: movieTime});\n    const mvId = movieTime.id;\n    const reqParams = {\n      method: 'POST',\n      body: mvId\n    };\n    fetch('http://localhost:8080/api/movie/v1/seatstatus',reqParams)\n    .then((response) => {\n      if(!response.ok) throw new Error(response.status);\n      else {\n        var jwt_token = response.headers.get('request-hash')\n        this.setState({jwt_token: jwt_token})\n        return response;\n      }\n    })\n    .then((data) => {\n      console.log(data)\n      this.setState({soldseat:data});\n      this.setState({showHall:true});\n    })\n    .catch((error) => {\n      console.log('error: ' + error);\n      this.setState({showHall:true});\n      this.setState({soldseat: null});\n      this.setState({selectedMovie: null});\n      this.setState({selectedMovieTime: null});\n      alert('Error, failed to get data');\n    });\n\n  }\n\n  confirmBooking( mv ,mt, sSeat){\n    this.setState({selectedSeat: sSeat});\n    this.setState({selectedMovie: mv});\n    this.setState({selectedMovieTime: mt});\n    this.setState({showHall:false});\n    var selectedSeats = [];\n    sSeat.forEach(s => {\n      selectedSeats.push({name: s});\n    });\n\n    var jwt_token = jwt_decode(this.state.jwt_token);\n    var booking = {id: jwt_token.sub, movieTime: mt, bookingSeat: selectedSeats}\n    \n    //post to backend to reserve\n    const reqParams = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json',\n                  'request-hash': this.state.jwt_token},  \n      body: JSON.stringify(booking)\n    };\n    fetch('http://localhost:8080/api/booking/v1/reserve',reqParams)\n    .then((response) => {\n      if(!response.ok) throw new Error(response.status);\n      else {\n        var jwt_token_new = response.headers.get('request-hash')\n        this.setState({jwt_token: jwt_token_new})\n        return response;\n      }})\n    .then((data) => {\n        console.log(mv);\n        this.setState({showBookingDetail: true});      \n    })  \n    .catch((error) => {\n      console.log('error: ' + error);\n      this.setState({showBookingDetail: false});\n      this.setState({selectedSeat: null});\n      this.setState({selectedMovie: null});\n      this.setState({selectedMovieTime: null});\n      alert('Sorry, The seat(s) that you selected is taken by others');\n    });\n    \n    //show popup for booking\n    //show popup taken, refresh view\n  }\n  cancelTicket(e){\n    //TODO clear blocked seat\n    this.setState({selectedMovie: null})\n    this.setState({showBookingDetail: false});\n  }\n  purchaseTicket(mv, mt,custName,custEmail){\n    console.log(\"jwt token\")\n    console.log(this.state.jwt_token)\n    var jwt_token = jwt_decode(this.state.jwt_token);\n    var booking = {id: jwt_token.sub, movieTime: mt, name: custName, email : custEmail}\n    \n    //post to backend to reserve\n    const reqParams = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json',\n                  'request-hash': this.state.jwt_token},  \n      body: JSON.stringify(booking)\n    };\n    fetch('http://localhost:8080/api/booking/v1/purchase',reqParams)\n    .then((response) => {\n      if(!response.ok) throw new Error(response.status);\n      })\n    .catch((error) => {\n      console.log('error: ' + error);\n      alert('Sorry, Something wrong with the purchase, please try agains');\n    });\n    this.setState({jwt_token: null});\n    this.setState({selectedMovie: null})\n    this.setState({showBookingDetail: false});\n    alert('Congraturation, your booking is completed');\n  }\n    //const Movie = ({ movies }) => {\n    render() {\n      const showBookingDetail=this.state.showBookingDetail;\n      const showHall=this.state.showHall;\n      const movies = this.props.movies;\n      const selectedMovie = this.state.selectedMovie;\n      const selectedMovieTime = this.state.selectedMovieTime;\n      const soldSeat = this.state.soldSeat;\n      \n      return (\n        <div>\n          {showBookingDetail && <BookingDetail movie={this.state.selectedMovie}  movieTime={this.state.selectedMovieTime} \n          selectedSeat={this.state.selectedSeat}\n          handleClose={this.cancelTicket} handlePurchase={this.purchaseTicket} />}\n          <center><h1>Movie List</h1></center>\n          <CardGroup>\n          {movies.map((movie) => (\n            <Card style={{ width: '18rem' }} key={movie.id}>\n              \n                <Card.Body>\n                <Card.Title>{movie.name}</Card.Title>\n                <Card.Text>\n                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sodales volutpat sodales. \n                </Card.Text>\n                \n                {movie.movieTime != null && movie.movieTime.map((ms) => (\n                   <Button variant=\"link\" onClick={() => this.selectSeat(movie,ms)} movie={movie} movieTime={ms} key={ms.id}  >{ms.time}</Button>\n                ))}\n              </Card.Body>\n              </Card>\n          ))}\n          </CardGroup>\n          {showHall && <Hall handleConfirmBooking={this.confirmBooking} selectedMovie={selectedMovie} selectedMovieTime={selectedMovieTime} soldSeat={soldSeat} />}\n\n        </div>\n      )\n    };\n  }\nexport default Movie\n","import logo from './logo.svg';\nimport './App.css';\nimport React, { Component } from 'react'\nimport Movie from './components/movie';\n\n\nclass App extends Component {\n\n  state = {\n    movies: [],\n    showModal: false\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:8080/api/movie/v1/list')\n    .then(res => res.json())\n    .then((data) => {\n      this.setState({ movies: data })\n    })\n    .catch(console.log)\n  }\n\n  render (){\n    return (\n    <div className=\"card\">\n            <div className=\"card-body\">\n\n              \n                <Movie movies={this.state.movies} />\n              \n              \n            </div>\n\n          </div>\n          )\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}